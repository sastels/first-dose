{"version":3,"sources":["DoseChart.js","App.js","reportWebVitals.js","index.js"],"names":["firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","mungeData","data","country","population","country_data","munged","key","x","push","date","peopleVaccinated","Chart","options","plotOptions","line","marker","enabled","tooltip","shared","formatter","yourDate","Date","this","offset","getTimezoneOffset","retval","getTime","toISOString","split","points","map","series","name","y","toFixed","join","chart","zoomType","title","text","xAxis","type","yAxis","highcharts","Highcharts","DoseChart","useState","setData","updated","setUpdated","getData","a","storage","storageRef","ref","child","getMetadata","metadata","updatedDate","slice","getDownloadURL","url","xhr","XMLHttpRequest","responseType","onload","response","open","send","useEffect","className","App","style","textAlign","margin","href","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.d987190a.chunk.js","sourcesContent":["import Highcharts from \"highcharts\";\nimport HighchartsReact from \"highcharts-react-official\";\nimport React, { useState, useEffect } from \"react\";\nimport firebase from \"firebase/app\";\nimport \"firebase/storage\";\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyCYOlqH5i8Q_nN_5i91JvUY3qU4Blan9Uo\",\n  authDomain: \"first-dose-eb9bd.firebaseapp.com\",\n  projectId: \"first-dose-eb9bd\",\n  storageBucket: \"first-dose-eb9bd.appspot.com\",\n  messagingSenderId: \"212541290476\",\n  appId: \"1:212541290476:web:03a13b63cb5280de87b2c9\",\n  measurementId: \"G-2CY2T47KWQ\",\n};\nfirebase.initializeApp(firebaseConfig);\n\nconst mungeData = (data, country, population) => {\n  const country_data = data[country] || {};\n  //   console.log(country);\n  //   console.log({ country_data });\n  var munged = [];\n  for (const key in country_data) {\n    if (country_data[key] !== null) {\n      const x = country_data[key];\n      //   console.log(x);\n      munged.push([x.date, (x.peopleVaccinated * 100) / population]);\n    }\n  }\n  return munged;\n};\n\nfunction Chart(data) {\n  const options = {\n    plotOptions: {\n      line: {\n        marker: {\n          enabled: false,\n        },\n      },\n    },\n    tooltip: {\n      shared: true,\n      formatter: function () {\n        var yourDate = new Date(this.x);\n        const offset = yourDate.getTimezoneOffset();\n        yourDate = new Date(yourDate.getTime() + offset * 60 * 1000);\n        const date = yourDate.toISOString().split(\"T\")[0];\n        var retval = date + \"<br>\";\n        retval += this.points\n          .map((x) => `${x.series.name}: ${x.y.toFixed(1)}%`)\n          .join(\"<br>\");\n        return retval;\n      },\n    },\n    chart: {\n      zoomType: \"x\",\n    },\n    title: {\n      text: \"First Dose Coverage\",\n    },\n    xAxis: {\n      type: \"datetime\",\n    },\n    yAxis: {\n      title: {\n        text: \"Percentage covered\",\n      },\n    },\n    series: [\n      {\n        name: \"Israel\",\n        data: mungeData(data, \"Israel\", 8652167),\n      },\n      {\n        name: \"United Kingdom\",\n        data: mungeData(data, \"United Kingdom\", 67893379),\n      },\n      {\n        name: \"United States\",\n        data: mungeData(data, \"United States\", 334438269),\n      },\n      {\n        name: \"Canada\",\n        data: mungeData(data, \"Canada\", 37746527),\n      },\n    ],\n  };\n  return <HighchartsReact highcharts={Highcharts} options={options} />;\n}\n\nfunction DoseChart() {\n  const [data, setData] = useState([]);\n  const [updated, setUpdated] = useState([]);\n\n  const getData = async () => {\n    const storage = firebase.storage();\n    const storageRef = storage.ref();\n    const metadata = await storageRef.child(\"munged_data.json\").getMetadata();\n    const updatedDate = metadata.updated.slice(0, 10);\n    setUpdated(updatedDate);\n    const url = await storageRef.child(\"munged_data.json\").getDownloadURL();\n    var xhr = new XMLHttpRequest();\n    xhr.responseType = \"json\";\n    xhr.onload = async () => {\n      var data = await xhr.response;\n      setData(data);\n    };\n    xhr.open(\"GET\", url);\n    xhr.send();\n  };\n\n  useEffect(() => {\n    getData();\n  }, []);\n\n  return (\n    <div className=\"App\">\n      {Chart(data)}\n      <p> Last updated at {updated}</p>\n    </div>\n  );\n}\n\nexport default DoseChart;\n","import './App.css';\nimport DoseChart from './DoseChart';\n\n\nfunction App() {\n  return (\n    <div style={{textAlign:\"center\"}}>\n      <div style = {{margin : 50 }} className=\"App\">\n        <DoseChart/>\n      </div>\n      <p>Percentage of people in a country who have had at least one dose of a Covid-19 vaccine.</p>\n      <p>Data from <a href=\"https://github.com/owid/covid-19-data\">Our World in Data</a>.</p>\n      <p>Code in <a href=\"https://github.com/sastels/first-dose\">Github</a>.</p>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}